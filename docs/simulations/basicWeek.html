<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Effekttariff Simulation Report</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
  <style>
    * { box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }
    .container { max-width: 1400px; margin: 0 auto; }
    h1 { color: #333; margin-bottom: 5px; }
    .subtitle { color: #666; margin-bottom: 20px; }
    .meta {
      background: #fff;
      padding: 15px 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .meta-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
    }
    .meta-item { }
    .meta-label { font-size: 12px; color: #888; text-transform: uppercase; }
    .meta-value { font-size: 18px; font-weight: 600; color: #333; }
    .charts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
      gap: 20px;
    }
    .chart-container {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .chart-title { margin: 0 0 15px 0; color: #333; font-size: 16px; }
    canvas { max-height: 300px; }
    .summary {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      margin-top: 20px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .summary h3 { margin-top: 0; }
    .peaks-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    .peaks-table th, .peaks-table td {
      padding: 8px 12px;
      text-align: left;
      border-bottom: 1px solid #eee;
    }
    .peaks-table th { background: #f9f9f9; font-weight: 600; }
    .verification {
      margin-top: 20px;
      padding: 15px;
      border-radius: 8px;
    }
    .verification.passed { background: #d4edda; }
    .verification.failed { background: #f8d7da; }
    .analysis {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 25px;
      border-radius: 12px;
      margin-bottom: 20px;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
    }
    .analysis h2 { margin: 0 0 20px 0; font-size: 20px; }
    .analysis-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 20px;
      text-align: center;
    }
    .analysis-item { }
    .analysis-label { font-size: 12px; opacity: 0.9; text-transform: uppercase; margin-bottom: 5px; }
    .analysis-value { font-size: 28px; font-weight: 700; }
    .analysis-subtext { font-size: 12px; opacity: 0.8; margin-top: 3px; }
    .reduction { color: #4ade80; }
    .analysis-explanation {
      margin-top: 20px;
      padding-top: 15px;
      border-top: 1px solid rgba(255,255,255,0.2);
      font-size: 14px;
      line-height: 1.6;
    }
    .analysis-explanation strong { color: #fbbf24; }
    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
      background: rgba(255,255,255,0.1);
      border-radius: 8px;
      overflow: hidden;
    }
    .comparison-table th, .comparison-table td {
      padding: 12px 15px;
      text-align: left;
    }
    .comparison-table th {
      background: rgba(255,255,255,0.15);
      font-weight: 600;
      font-size: 12px;
      text-transform: uppercase;
    }
    .comparison-table td { border-top: 1px solid rgba(255,255,255,0.1); }
    @media (max-width: 768px) {
      .analysis-grid { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Effekttariff Simulation Report</h1>
    <p class="subtitle">Basic Week - One week of typical Swedish household consumption</p>

    <div class="meta">
      <div class="meta-grid">
        <div class="meta-item">
          <div class="meta-label">Period</div>
          <div class="meta-value">2024-01-14 to 2024-01-21</div>
        </div>
        <div class="meta-item">
          <div class="meta-label">Duration</div>
          <div class="meta-value">7 days</div>
        </div>
        <div class="meta-item">
          <div class="meta-label">Peak Count</div>
          <div class="meta-value">3</div>
        </div>
        <div class="meta-item">
          <div class="meta-label">Peak Hours</div>
          <div class="meta-value">7:00 - 21:00</div>
        </div>
        <div class="meta-item">
          <div class="meta-label">Average Power</div>
          <div class="meta-value">2.29 kW</div>
        </div>
        <div class="meta-item">
          <div class="meta-label">Peak Average</div>
          <div class="meta-value">5 kW</div>
        </div>
      </div>
    </div>
    

    <div class="analysis">
      <h2>Analysis: What Does This Simulation Prove?</h2>
      <div class="analysis-explanation"><strong>What this proves:</strong> The effekttariff system correctly identifies and tracks your top 3 consumption peaks
      during peak hours (07:00-21:00). After a brief learning phase, the system establishes a baseline and begins
      calculating optimal current limits. This scenario uses a realistic Swedish household profile with morning and
      evening peaks typical of work-from-home or family households. The comparison shows how the system would track
      your consumption patterns even without active battery intervention.</div>
      
      <div class="analysis-grid">
        <div class="analysis-item">
          <div class="analysis-label">Detected Peak Average</div>
          <div class="analysis-value">5 kW</div>
          <div class="analysis-subtext">Top 3 peaks averaged</div>
        </div>
        <div class="analysis-item">
          <div class="analysis-label">Highest Peak</div>
          <div class="analysis-value">5.00 kW</div>
          <div class="analysis-subtext">Maximum recorded</div>
        </div>
        <div class="analysis-item">
          <div class="analysis-label">Est. Monthly Cost*</div>
          <div class="analysis-value">250 SEK</div>
          <div class="analysis-subtext">Effektavgift portion</div>
        </div>
      </div>
      <div class="analysis-explanation">
        <strong>No Battery Configured:</strong> This simulation demonstrates peak tracking and provider rule validation
        without active peak shaving. The system correctly identifies your top 3 consumption peaks
        and calculates that your current effektavgift would be approximately <strong>250 SEK/month</strong>.
        <br/><br/>
        <strong>Potential with Battery:</strong> Adding a home battery could reduce these peaks significantly.
        For example, a 10 kWh battery with 3 kW discharge rate could potentially reduce your peak average by 30-50%,
        saving <strong>100-125 SEK/month</strong>.
        Run the <code>batteryCharging</code> scenario to see battery-assisted peak shaving in action.
      </div>
      <table class="comparison-table">
        <thead>
          <tr>
            <th>Peak #</th>
            <th>Date</th>
            <th>Hour</th>
            <th>Power (kW)</th>
          </tr>
        </thead>
        <tbody>
          
          <tr>
            <td>1</td>
            <td>2024-01-15</td>
            <td>17:00</td>
            <td>5.00</td>
          </tr>
          
          <tr>
            <td>2</td>
            <td>2024-01-16</td>
            <td>17:00</td>
            <td>5.00</td>
          </tr>
          
          <tr>
            <td>3</td>
            <td>2024-01-17</td>
            <td>17:00</td>
            <td>5.00</td>
          </tr>
          
        </tbody>
      </table>
      
      <div style="font-size: 11px; opacity: 0.7; margin-top: 10px;">*Estimated using typical Swedish effekttariff rate of ~50 SEK/kW/month. Actual rates vary by provider.</div>
    </div>

    <div class="charts-grid">
      <div class="chart-container">
        <h3 class="chart-title">Hourly Power Consumption vs Limit</h3>
        <canvas id="powerChart"></canvas>
      </div>

      <div class="chart-container">
        <h3 class="chart-title">Top 3 Recorded Peaks</h3>
        <canvas id="peaksChart"></canvas>
      </div>

      
    </div>

    <div class="summary">
      <h3>Top Peaks</h3>
      <table class="peaks-table">
        <thead>
          <tr>
            <th>#</th>
            <th>Date</th>
            <th>Hour</th>
            <th>Actual (kW)</th>
            <th>Effective (kW)</th>
          </tr>
        </thead>
        <tbody>
          
          <tr>
            <td>1</td>
            <td>2024-01-15</td>
            <td>17:00</td>
            <td>5.00</td>
            <td>5.00</td>
          </tr>
          
          <tr>
            <td>2</td>
            <td>2024-01-16</td>
            <td>17:00</td>
            <td>5.00</td>
            <td>5.00</td>
          </tr>
          
          <tr>
            <td>3</td>
            <td>2024-01-17</td>
            <td>17:00</td>
            <td>5.00</td>
            <td>5.00</td>
          </tr>
          
        </tbody>
      </table>
    </div>

    
    <div class="verification passed">
      <strong>Verification: âœ“ PASSED</strong>
      (3/3 checks)
    </div>
    
  </div>

  <script>
    // Power consumption chart
    new Chart(document.getElementById('powerChart'), {
      type: 'line',
      data: {
        labels: ["2024-01-14T23:00:00.000Z","2024-01-15T00:00:00.000Z","2024-01-15T01:00:00.000Z","2024-01-15T02:00:00.000Z","2024-01-15T03:00:00.000Z","2024-01-15T04:00:00.000Z","2024-01-15T05:00:00.000Z","2024-01-15T06:00:00.000Z","2024-01-15T07:00:00.000Z","2024-01-15T08:00:00.000Z","2024-01-15T09:00:00.000Z","2024-01-15T10:00:00.000Z","2024-01-15T11:00:00.000Z","2024-01-15T12:00:00.000Z","2024-01-15T13:00:00.000Z","2024-01-15T14:00:00.000Z","2024-01-15T15:00:00.000Z","2024-01-15T16:00:00.000Z","2024-01-15T17:00:00.000Z","2024-01-15T18:00:00.000Z","2024-01-15T19:00:00.000Z","2024-01-15T20:00:00.000Z","2024-01-15T21:00:00.000Z","2024-01-15T22:00:00.000Z","2024-01-15T23:00:00.000Z","2024-01-16T00:00:00.000Z","2024-01-16T01:00:00.000Z","2024-01-16T02:00:00.000Z","2024-01-16T03:00:00.000Z","2024-01-16T04:00:00.000Z","2024-01-16T05:00:00.000Z","2024-01-16T06:00:00.000Z","2024-01-16T07:00:00.000Z","2024-01-16T08:00:00.000Z","2024-01-16T09:00:00.000Z","2024-01-16T10:00:00.000Z","2024-01-16T11:00:00.000Z","2024-01-16T12:00:00.000Z","2024-01-16T13:00:00.000Z","2024-01-16T14:00:00.000Z","2024-01-16T15:00:00.000Z","2024-01-16T16:00:00.000Z","2024-01-16T17:00:00.000Z","2024-01-16T18:00:00.000Z","2024-01-16T19:00:00.000Z","2024-01-16T20:00:00.000Z","2024-01-16T21:00:00.000Z","2024-01-16T22:00:00.000Z","2024-01-16T23:00:00.000Z","2024-01-17T00:00:00.000Z","2024-01-17T01:00:00.000Z","2024-01-17T02:00:00.000Z","2024-01-17T03:00:00.000Z","2024-01-17T04:00:00.000Z","2024-01-17T05:00:00.000Z","2024-01-17T06:00:00.000Z","2024-01-17T07:00:00.000Z","2024-01-17T08:00:00.000Z","2024-01-17T09:00:00.000Z","2024-01-17T10:00:00.000Z","2024-01-17T11:00:00.000Z","2024-01-17T12:00:00.000Z","2024-01-17T13:00:00.000Z","2024-01-17T14:00:00.000Z","2024-01-17T15:00:00.000Z","2024-01-17T16:00:00.000Z","2024-01-17T17:00:00.000Z","2024-01-17T18:00:00.000Z","2024-01-17T19:00:00.000Z","2024-01-17T20:00:00.000Z","2024-01-17T21:00:00.000Z","2024-01-17T22:00:00.000Z","2024-01-17T23:00:00.000Z","2024-01-18T00:00:00.000Z","2024-01-18T01:00:00.000Z","2024-01-18T02:00:00.000Z","2024-01-18T03:00:00.000Z","2024-01-18T04:00:00.000Z","2024-01-18T05:00:00.000Z","2024-01-18T06:00:00.000Z","2024-01-18T07:00:00.000Z","2024-01-18T08:00:00.000Z","2024-01-18T09:00:00.000Z","2024-01-18T10:00:00.000Z","2024-01-18T11:00:00.000Z","2024-01-18T12:00:00.000Z","2024-01-18T13:00:00.000Z","2024-01-18T14:00:00.000Z","2024-01-18T15:00:00.000Z","2024-01-18T16:00:00.000Z","2024-01-18T17:00:00.000Z","2024-01-18T18:00:00.000Z","2024-01-18T19:00:00.000Z","2024-01-18T20:00:00.000Z","2024-01-18T21:00:00.000Z","2024-01-18T22:00:00.000Z","2024-01-18T23:00:00.000Z","2024-01-19T00:00:00.000Z","2024-01-19T01:00:00.000Z","2024-01-19T02:00:00.000Z","2024-01-19T03:00:00.000Z","2024-01-19T04:00:00.000Z","2024-01-19T05:00:00.000Z","2024-01-19T06:00:00.000Z","2024-01-19T07:00:00.000Z","2024-01-19T08:00:00.000Z","2024-01-19T09:00:00.000Z","2024-01-19T10:00:00.000Z","2024-01-19T11:00:00.000Z","2024-01-19T12:00:00.000Z","2024-01-19T13:00:00.000Z","2024-01-19T14:00:00.000Z","2024-01-19T15:00:00.000Z","2024-01-19T16:00:00.000Z","2024-01-19T17:00:00.000Z","2024-01-19T18:00:00.000Z","2024-01-19T19:00:00.000Z","2024-01-19T20:00:00.000Z","2024-01-19T21:00:00.000Z","2024-01-19T22:00:00.000Z","2024-01-19T23:00:00.000Z","2024-01-20T00:00:00.000Z","2024-01-20T01:00:00.000Z","2024-01-20T02:00:00.000Z","2024-01-20T03:00:00.000Z","2024-01-20T04:00:00.000Z","2024-01-20T05:00:00.000Z","2024-01-20T06:00:00.000Z","2024-01-20T07:00:00.000Z","2024-01-20T08:00:00.000Z","2024-01-20T09:00:00.000Z","2024-01-20T10:00:00.000Z","2024-01-20T11:00:00.000Z","2024-01-20T12:00:00.000Z","2024-01-20T13:00:00.000Z","2024-01-20T14:00:00.000Z","2024-01-20T15:00:00.000Z","2024-01-20T16:00:00.000Z","2024-01-20T17:00:00.000Z","2024-01-20T18:00:00.000Z","2024-01-20T19:00:00.000Z","2024-01-20T20:00:00.000Z","2024-01-20T21:00:00.000Z","2024-01-20T22:00:00.000Z","2024-01-20T23:00:00.000Z","2024-01-21T00:00:00.000Z","2024-01-21T01:00:00.000Z","2024-01-21T02:00:00.000Z","2024-01-21T03:00:00.000Z","2024-01-21T04:00:00.000Z","2024-01-21T05:00:00.000Z","2024-01-21T06:00:00.000Z","2024-01-21T07:00:00.000Z","2024-01-21T08:00:00.000Z","2024-01-21T09:00:00.000Z","2024-01-21T10:00:00.000Z","2024-01-21T11:00:00.000Z","2024-01-21T12:00:00.000Z","2024-01-21T13:00:00.000Z","2024-01-21T14:00:00.000Z","2024-01-21T15:00:00.000Z","2024-01-21T16:00:00.000Z","2024-01-21T17:00:00.000Z","2024-01-21T18:00:00.000Z","2024-01-21T19:00:00.000Z","2024-01-21T20:00:00.000Z","2024-01-21T21:00:00.000Z"],
        datasets: [
          {
            label: 'Consumption (W)',
            data: [1000,1000,1000,1000,1000,1000,4100,4100,4100,1600,1600,1600,1600,1600,1600,1600,1600,5000,5000,5000,5000,1200,1200,1200,1000,1000,1000,1000,1000,1000,4100,4100,4100,1600,1600,1600,1600,1600,1600,1600,1600,5000,5000,5000,5000,1200,1200,1200,1000,1000,1000,1000,1000,1000,4100,4100,4100,1600,1600,1600,1600,1600,1600,1600,1600,5000,5000,5000,5000,1200,1200,1200,1000,1000,1000,1000,1000,1000,4100,4100,4100,1600,1600,1600,1600,1600,1600,1600,1600,5000,5000,5000,5000,1200,1200,1200,1000,1000,1000,1000,1000,1000,4100,4100,4100,1600,1600,1600,1600,1600,1600,1600,1600,5000,5000,5000,5000,1200,1200,1200,1000,1000,1000,1000,1000,1000,4100,4100,4100,1600,1600,1600,1600,1600,1600,1600,1600,5000,5000,5000,5000,1200,1200,1200,1000,1000,1000,1000,1000,1000,4100,4100,4100,1600,1600,1600,1600,1600,1600,1600,1600,5000,5000,5000,5000,1200,1200],
            borderColor: '#3b82f6',
            backgroundColor: 'rgba(59, 130, 246, 0.1)',
            fill: true,
            tension: 0.3,
            pointRadius: 0
          },
          {
            label: 'Effective (W)',
            data: [1000,1000,1000,1000,1000,1000,4100,4100,4100,1600,1600,1600,1600,1600,1600,1600,1600,5000,5000,5000,5000,1200,1200,1200,1000,1000,1000,1000,1000,1000,4100,4100,4100,1600,1600,1600,1600,1600,1600,1600,1600,5000,5000,5000,5000,1200,1200,1200,1000,1000,1000,1000,1000,1000,4100,4100,4100,1600,1600,1600,1600,1600,1600,1600,1600,5000,5000,5000,5000,1200,1200,1200,1000,1000,1000,1000,1000,1000,4100,4100,4100,1600,1600,1600,1600,1600,1600,1600,1600,5000,5000,5000,5000,1200,1200,1200,1000,1000,1000,1000,1000,1000,4100,4100,4100,1600,1600,1600,1600,1600,1600,1600,1600,5000,5000,5000,5000,1200,1200,1200,1000,1000,1000,1000,1000,1000,4100,4100,4100,1600,1600,1600,1600,1600,1600,1600,1600,5000,5000,5000,5000,1200,1200,1200,1000,1000,1000,1000,1000,1000,4100,4100,4100,1600,1600,1600,1600,1600,1600,1600,1600,5000,5000,5000,5000,1200,1200],
            borderColor: '#10b981',
            backgroundColor: 'transparent',
            borderDash: [5, 5],
            tension: 0.3,
            pointRadius: 0
          },
          {
            label: 'Limit (W)',
            data: [{"x":"2024-01-14T23:00:00.000Z","y":17250},{"x":"2024-01-15T00:00:00.000Z","y":17250},{"x":"2024-01-15T01:00:00.000Z","y":17250},{"x":"2024-01-15T02:00:00.000Z","y":17250},{"x":"2024-01-15T03:00:00.000Z","y":17250},{"x":"2024-01-15T04:00:00.000Z","y":17250},{"x":"2024-01-15T05:00:00.000Z","y":17250},{"x":"2024-01-15T06:00:00.000Z","y":4002},{"x":"2024-01-15T07:00:00.000Z","y":4002},{"x":"2024-01-15T08:00:00.000Z","y":4002},{"x":"2024-01-15T09:00:00.000Z","y":4002},{"x":"2024-01-15T10:00:00.000Z","y":4002},{"x":"2024-01-15T11:00:00.000Z","y":4002},{"x":"2024-01-15T12:00:00.000Z","y":4002},{"x":"2024-01-15T13:00:00.000Z","y":4002},{"x":"2024-01-15T14:00:00.000Z","y":4002},{"x":"2024-01-15T15:00:00.000Z","y":4002},{"x":"2024-01-15T16:00:00.000Z","y":4002},{"x":"2024-01-15T17:00:00.000Z","y":4002},{"x":"2024-01-15T18:00:00.000Z","y":4002},{"x":"2024-01-15T19:00:00.000Z","y":4002},{"x":"2024-01-15T20:00:00.000Z","y":17250},{"x":"2024-01-15T21:00:00.000Z","y":17250},{"x":"2024-01-15T22:00:00.000Z","y":17250},{"x":"2024-01-15T23:00:00.000Z","y":17250},{"x":"2024-01-16T00:00:00.000Z","y":17250},{"x":"2024-01-16T01:00:00.000Z","y":17250},{"x":"2024-01-16T02:00:00.000Z","y":17250},{"x":"2024-01-16T03:00:00.000Z","y":17250},{"x":"2024-01-16T04:00:00.000Z","y":17250},{"x":"2024-01-16T05:00:00.000Z","y":17250},{"x":"2024-01-16T06:00:00.000Z","y":4002},{"x":"2024-01-16T07:00:00.000Z","y":4002},{"x":"2024-01-16T08:00:00.000Z","y":4002},{"x":"2024-01-16T09:00:00.000Z","y":4002},{"x":"2024-01-16T10:00:00.000Z","y":4002},{"x":"2024-01-16T11:00:00.000Z","y":4002},{"x":"2024-01-16T12:00:00.000Z","y":4002},{"x":"2024-01-16T13:00:00.000Z","y":4002},{"x":"2024-01-16T14:00:00.000Z","y":4002},{"x":"2024-01-16T15:00:00.000Z","y":4002},{"x":"2024-01-16T16:00:00.000Z","y":4002},{"x":"2024-01-16T17:00:00.000Z","y":4002},{"x":"2024-01-16T18:00:00.000Z","y":4002},{"x":"2024-01-16T19:00:00.000Z","y":4002},{"x":"2024-01-16T20:00:00.000Z","y":17250},{"x":"2024-01-16T21:00:00.000Z","y":17250},{"x":"2024-01-16T22:00:00.000Z","y":17250},{"x":"2024-01-16T23:00:00.000Z","y":17250},{"x":"2024-01-17T00:00:00.000Z","y":17250},{"x":"2024-01-17T01:00:00.000Z","y":17250},{"x":"2024-01-17T02:00:00.000Z","y":17250},{"x":"2024-01-17T03:00:00.000Z","y":17250},{"x":"2024-01-17T04:00:00.000Z","y":17250},{"x":"2024-01-17T05:00:00.000Z","y":17250},{"x":"2024-01-17T06:00:00.000Z","y":4002},{"x":"2024-01-17T07:00:00.000Z","y":4002},{"x":"2024-01-17T08:00:00.000Z","y":4002},{"x":"2024-01-17T09:00:00.000Z","y":4002},{"x":"2024-01-17T10:00:00.000Z","y":4002},{"x":"2024-01-17T11:00:00.000Z","y":4002},{"x":"2024-01-17T12:00:00.000Z","y":4002},{"x":"2024-01-17T13:00:00.000Z","y":4002},{"x":"2024-01-17T14:00:00.000Z","y":4002},{"x":"2024-01-17T15:00:00.000Z","y":4002},{"x":"2024-01-17T16:00:00.000Z","y":4002},{"x":"2024-01-17T17:00:00.000Z","y":4692},{"x":"2024-01-17T18:00:00.000Z","y":4692},{"x":"2024-01-17T19:00:00.000Z","y":4692},{"x":"2024-01-17T20:00:00.000Z","y":17250},{"x":"2024-01-17T21:00:00.000Z","y":17250},{"x":"2024-01-17T22:00:00.000Z","y":17250},{"x":"2024-01-17T23:00:00.000Z","y":17250},{"x":"2024-01-18T00:00:00.000Z","y":17250},{"x":"2024-01-18T01:00:00.000Z","y":17250},{"x":"2024-01-18T02:00:00.000Z","y":17250},{"x":"2024-01-18T03:00:00.000Z","y":17250},{"x":"2024-01-18T04:00:00.000Z","y":17250},{"x":"2024-01-18T05:00:00.000Z","y":17250},{"x":"2024-01-18T06:00:00.000Z","y":4692},{"x":"2024-01-18T07:00:00.000Z","y":4692},{"x":"2024-01-18T08:00:00.000Z","y":4692},{"x":"2024-01-18T09:00:00.000Z","y":4692},{"x":"2024-01-18T10:00:00.000Z","y":4692},{"x":"2024-01-18T11:00:00.000Z","y":4692},{"x":"2024-01-18T12:00:00.000Z","y":4692},{"x":"2024-01-18T13:00:00.000Z","y":4692},{"x":"2024-01-18T14:00:00.000Z","y":4692},{"x":"2024-01-18T15:00:00.000Z","y":4692},{"x":"2024-01-18T16:00:00.000Z","y":4692},{"x":"2024-01-18T17:00:00.000Z","y":4692},{"x":"2024-01-18T18:00:00.000Z","y":4692},{"x":"2024-01-18T19:00:00.000Z","y":4692},{"x":"2024-01-18T20:00:00.000Z","y":17250},{"x":"2024-01-18T21:00:00.000Z","y":17250},{"x":"2024-01-18T22:00:00.000Z","y":17250},{"x":"2024-01-18T23:00:00.000Z","y":17250},{"x":"2024-01-19T00:00:00.000Z","y":17250},{"x":"2024-01-19T01:00:00.000Z","y":17250},{"x":"2024-01-19T02:00:00.000Z","y":17250},{"x":"2024-01-19T03:00:00.000Z","y":17250},{"x":"2024-01-19T04:00:00.000Z","y":17250},{"x":"2024-01-19T05:00:00.000Z","y":17250},{"x":"2024-01-19T06:00:00.000Z","y":4692},{"x":"2024-01-19T07:00:00.000Z","y":4692},{"x":"2024-01-19T08:00:00.000Z","y":4692},{"x":"2024-01-19T09:00:00.000Z","y":4692},{"x":"2024-01-19T10:00:00.000Z","y":4692},{"x":"2024-01-19T11:00:00.000Z","y":4692},{"x":"2024-01-19T12:00:00.000Z","y":4692},{"x":"2024-01-19T13:00:00.000Z","y":4692},{"x":"2024-01-19T14:00:00.000Z","y":4692},{"x":"2024-01-19T15:00:00.000Z","y":4692},{"x":"2024-01-19T16:00:00.000Z","y":4692},{"x":"2024-01-19T17:00:00.000Z","y":4692},{"x":"2024-01-19T18:00:00.000Z","y":4692},{"x":"2024-01-19T19:00:00.000Z","y":4692},{"x":"2024-01-19T20:00:00.000Z","y":17250},{"x":"2024-01-19T21:00:00.000Z","y":17250},{"x":"2024-01-19T22:00:00.000Z","y":17250},{"x":"2024-01-19T23:00:00.000Z","y":17250},{"x":"2024-01-20T00:00:00.000Z","y":17250},{"x":"2024-01-20T01:00:00.000Z","y":17250},{"x":"2024-01-20T02:00:00.000Z","y":17250},{"x":"2024-01-20T03:00:00.000Z","y":17250},{"x":"2024-01-20T04:00:00.000Z","y":17250},{"x":"2024-01-20T05:00:00.000Z","y":17250},{"x":"2024-01-20T06:00:00.000Z","y":4692},{"x":"2024-01-20T07:00:00.000Z","y":4692},{"x":"2024-01-20T08:00:00.000Z","y":4692},{"x":"2024-01-20T09:00:00.000Z","y":4692},{"x":"2024-01-20T10:00:00.000Z","y":4692},{"x":"2024-01-20T11:00:00.000Z","y":4692},{"x":"2024-01-20T12:00:00.000Z","y":4692},{"x":"2024-01-20T13:00:00.000Z","y":4692},{"x":"2024-01-20T14:00:00.000Z","y":4692},{"x":"2024-01-20T15:00:00.000Z","y":4692},{"x":"2024-01-20T16:00:00.000Z","y":4692},{"x":"2024-01-20T17:00:00.000Z","y":4692},{"x":"2024-01-20T18:00:00.000Z","y":4692},{"x":"2024-01-20T19:00:00.000Z","y":4692},{"x":"2024-01-20T20:00:00.000Z","y":17250},{"x":"2024-01-20T21:00:00.000Z","y":17250},{"x":"2024-01-20T22:00:00.000Z","y":17250},{"x":"2024-01-20T23:00:00.000Z","y":17250},{"x":"2024-01-21T00:00:00.000Z","y":17250},{"x":"2024-01-21T01:00:00.000Z","y":17250},{"x":"2024-01-21T02:00:00.000Z","y":17250},{"x":"2024-01-21T03:00:00.000Z","y":17250},{"x":"2024-01-21T04:00:00.000Z","y":17250},{"x":"2024-01-21T05:00:00.000Z","y":17250},{"x":"2024-01-21T06:00:00.000Z","y":4692},{"x":"2024-01-21T07:00:00.000Z","y":4692},{"x":"2024-01-21T08:00:00.000Z","y":4692},{"x":"2024-01-21T09:00:00.000Z","y":4692},{"x":"2024-01-21T10:00:00.000Z","y":4692},{"x":"2024-01-21T11:00:00.000Z","y":4692},{"x":"2024-01-21T12:00:00.000Z","y":4692},{"x":"2024-01-21T13:00:00.000Z","y":4692},{"x":"2024-01-21T14:00:00.000Z","y":4692},{"x":"2024-01-21T15:00:00.000Z","y":4692},{"x":"2024-01-21T16:00:00.000Z","y":4692},{"x":"2024-01-21T17:00:00.000Z","y":4692},{"x":"2024-01-21T18:00:00.000Z","y":4692},{"x":"2024-01-21T19:00:00.000Z","y":4692},{"x":"2024-01-21T20:00:00.000Z","y":17250},{"x":"2024-01-21T21:00:00.000Z","y":17250}],
            borderColor: '#ef4444',
            backgroundColor: 'transparent',
            borderWidth: 2,
            stepped: true,
            pointRadius: 0
          }
        ]
      },
      options: {
        responsive: true,
        interaction: { intersect: false, mode: 'index' },
        scales: {
          x: {
            type: 'time',
            time: { unit: 'day' },
            title: { display: true, text: 'Date' }
          },
          y: {
            title: { display: true, text: 'Power (W)' },
            beginAtZero: true
          }
        },
        plugins: {
          legend: { position: 'top' },
          tooltip: {
            callbacks: {
              label: function(ctx) {
                return ctx.dataset.label + ': ' + (ctx.parsed.y / 1000).toFixed(2) + ' kW';
              }
            }
          }
        }
      }
    });

    // Peaks bar chart
    new Chart(document.getElementById('peaksChart'), {
      type: 'bar',
      data: {
        labels: ["2024-01-15 17:00","2024-01-16 17:00","2024-01-17 17:00"],
        datasets: [{
          label: 'Effective Power (W)',
          data: [5000,5000,5000],
          backgroundColor: '#f59e0b',
          borderColor: '#d97706',
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        indexAxis: 'y',
        scales: {
          x: {
            title: { display: true, text: 'Power (W)' },
            beginAtZero: true
          }
        },
        plugins: {
          tooltip: {
            callbacks: {
              label: function(ctx) {
                return (ctx.parsed.x / 1000).toFixed(2) + ' kW';
              }
            }
          }
        }
      }
    });

    
  </script>
</body>
</html>